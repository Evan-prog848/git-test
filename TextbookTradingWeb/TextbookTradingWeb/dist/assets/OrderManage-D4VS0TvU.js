import{j as Z}from"./admin-B7OQe_Oy.js";import{_ as q,o as A,b as m,c as k,e,w as t,r as n,i as f,K as F,J as G,l as s,I as H,f as M,d as c,t as d,g as N,Z as R,P as W}from"./index-Bc-dwE5O.js";import"./request-bgZeUyhp.js";import"./auth-BBsyecEI.js";const X={class:"order-manage"},Y={class:"price"},ee={class:"action-buttons"},te={class:"pagination"},le={key:0,class:"order-detail"},ae={class:"price"},oe={class:"contact-info"},ne={key:0,class:"remark-section"},se={__name:"OrderManage",setup(re){const g=f(!1),h=f(0),x=f([]),v=f(!1),o=f(null),r=F({pageNum:1,pageSize:10,orderNo:"",status:void 0}),V=u=>["待确认","已确认","已完成","已取消"][u],C=u=>["","warning","success","info"][u],w=async()=>{g.value=!0;try{const u=await Z(r);x.value=u.data.records,h.value=u.data.total}catch{}finally{g.value=!1}},S=()=>{r.pageNum=1,w()},B=()=>{r.orderNo="",r.status=void 0,S()},U=u=>{o.value=u,v.value=!0},D=u=>{R.confirm("确定要强制取消该订单吗？","警示",{type:"warning"}).then(()=>{W.success("订单已强制取消"),u.status=3})};return A(w),(u,l)=>{const P=n("el-input"),y=n("el-form-item"),b=n("el-option"),E=n("el-select"),_=n("el-button"),$=n("el-form"),z=n("el-card"),p=n("el-table-column"),T=n("el-tag"),j=n("el-table"),I=n("el-pagination"),i=n("el-descriptions-item"),O=n("el-descriptions"),L=n("el-divider"),J=n("el-dialog"),K=G("loading");return m(),k("div",X,[e(z,{shadow:"never",class:"search-card"},{default:t(()=>[e($,{inline:!0,model:r},{default:t(()=>[e(y,{label:"订单号"},{default:t(()=>[e(P,{modelValue:r.orderNo,"onUpdate:modelValue":l[0]||(l[0]=a=>r.orderNo=a),placeholder:"请输入订单号",clearable:""},null,8,["modelValue"])]),_:1}),e(y,{label:"订单状态"},{default:t(()=>[e(E,{modelValue:r.status,"onUpdate:modelValue":l[1]||(l[1]=a=>r.status=a),placeholder:"全部",clearable:"",style:{width:"150px"}},{default:t(()=>[e(b,{label:"待确认",value:0}),e(b,{label:"已确认",value:1}),e(b,{label:"已完成",value:2}),e(b,{label:"已取消",value:3})]),_:1},8,["modelValue"])]),_:1}),e(y,null,{default:t(()=>[e(_,{type:"primary",onClick:S},{default:t(()=>[...l[6]||(l[6]=[s("查询",-1)])]),_:1}),e(_,{onClick:B},{default:t(()=>[...l[7]||(l[7]=[s("重置",-1)])]),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),e(z,{shadow:"never",class:"table-card"},{default:t(()=>[H((m(),M(j,{data:x.value,style:{width:"100%"}},{default:t(()=>[e(p,{prop:"orderNo",label:"订单号",width:"180"}),e(p,{prop:"textbookTitle",label:"教材名称","min-width":"200","show-overflow-tooltip":""}),e(p,{prop:"price",label:"交易价格",width:"100"},{default:t(a=>[c("span",Y,"¥"+d(a.row.price),1)]),_:1}),e(p,{prop:"sellerNickname",label:"卖家",width:"120"}),e(p,{prop:"buyerNickname",label:"买家",width:"120"}),e(p,{label:"状态",width:"100"},{default:t(a=>[e(T,{type:C(a.row.status)},{default:t(()=>[s(d(V(a.row.status)),1)]),_:2},1032,["type"])]),_:1}),e(p,{prop:"createTime",label:"下单时间",width:"180"}),e(p,{label:"操作",width:"140",fixed:"right"},{default:t(a=>[c("div",ee,[e(_,{size:"small",link:"",type:"primary",onClick:Q=>U(a.row)},{default:t(()=>[...l[8]||(l[8]=[s("详情",-1)])]),_:1},8,["onClick"]),a.row.status===0||a.row.status===1?(m(),M(_,{key:0,size:"small",link:"",type:"danger",onClick:Q=>D(a.row)},{default:t(()=>[...l[9]||(l[9]=[s(" 取消 ",-1)])]),_:1},8,["onClick"])):N("",!0)])]),_:1})]),_:1},8,["data"])),[[K,g.value]]),c("div",te,[e(I,{"current-page":r.pageNum,"onUpdate:currentPage":l[2]||(l[2]=a=>r.pageNum=a),"page-size":r.pageSize,"onUpdate:pageSize":l[3]||(l[3]=a=>r.pageSize=a),total:h.value,layout:"total, prev, pager, next, jumper",onCurrentChange:w},null,8,["current-page","page-size","total"])])]),_:1}),e(J,{modelValue:v.value,"onUpdate:modelValue":l[5]||(l[5]=a=>v.value=a),title:"订单详情",width:"650px"},{footer:t(()=>[e(_,{onClick:l[4]||(l[4]=a=>v.value=!1)},{default:t(()=>[...l[12]||(l[12]=[s("关闭",-1)])]),_:1})]),default:t(()=>[o.value?(m(),k("div",le,[e(O,{column:2,border:""},{default:t(()=>[e(i,{label:"订单号"},{default:t(()=>[s(d(o.value.orderNo),1)]),_:1}),e(i,{label:"订单状态"},{default:t(()=>[e(T,{type:C(o.value.status)},{default:t(()=>[s(d(V(o.value.status)),1)]),_:1},8,["type"])]),_:1}),e(i,{label:"教材名称"},{default:t(()=>[s(d(o.value.textbookTitle),1)]),_:1}),e(i,{label:"交易价格"},{default:t(()=>[c("span",ae,"¥"+d(o.value.price),1)]),_:1}),e(i,{label:"卖家"},{default:t(()=>[s(d(o.value.sellerNickname||"-"),1)]),_:1}),e(i,{label:"买家"},{default:t(()=>[s(d(o.value.buyerNickname||"-"),1)]),_:1}),e(i,{label:"下单时间"},{default:t(()=>[s(d(o.value.createTime),1)]),_:1}),e(i,{label:"更新时间"},{default:t(()=>[s(d(o.value.updateTime||"-"),1)]),_:1})]),_:1}),e(L),c("div",oe,[l[10]||(l[10]=c("h4",null,"联系信息",-1)),e(O,{column:2,border:""},{default:t(()=>[e(i,{label:"卖家手机"},{default:t(()=>[s(d(o.value.sellerPhone||"-"),1)]),_:1}),e(i,{label:"买家手机"},{default:t(()=>[s(d(o.value.buyerPhone||"-"),1)]),_:1})]),_:1})]),o.value.remark?(m(),k("div",ne,[l[11]||(l[11]=c("h4",null,"备注",-1)),c("p",null,d(o.value.remark),1)])):N("",!0)])):N("",!0)]),_:1},8,["modelValue"])])}}},ce=q(se,[["__scopeId","data-v-db56ecdc"]]);export{ce as default};
