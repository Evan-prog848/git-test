import{n as j,o as L,p as O,q as R}from"./admin-B7OQe_Oy.js";import{_ as S,o as A,b as y,c as F,e as t,w as l,r as n,i as m,J,I as K,f as P,l as i,t as Z,d as V,Z as G,P as k,K as H}from"./index-Bc-dwE5O.js";import"./request-bgZeUyhp.js";import"./auth-BBsyecEI.js";const Q={class:"notice-manage"},W={class:"card-header"},X={__name:"NoticeManage",setup(Y){const p=m(!1),g=m([]),d=m(!1),c=m(""),v=m(null),a=H({id:null,title:"",content:"",status:1}),N={title:[{required:!0,message:"请输入公告标题",trigger:"blur"}],content:[{required:!0,message:"请输入公告内容",trigger:"blur"}]},f=async()=>{p.value=!0;try{const s=await j({pageNum:1,pageSize:100});g.value=s.data.records}catch{}finally{p.value=!1}},x=()=>{c.value="发布公告",Object.assign(a,{id:null,title:"",content:"",status:1}),d.value=!0},C=s=>{c.value="编辑公告",Object.assign(a,s),d.value=!0},B=s=>{G.confirm("确定要删除这条公告吗？","提示",{type:"warning"}).then(async()=>{await L(s.id),k.success("删除成功"),f()})},D=()=>{v.value.validate(async s=>{s&&(a.id?await O(a):await R(a),k.success("操作成功"),d.value=!1,f())})};return A(f),(s,e)=>{const r=n("el-button"),u=n("el-table-column"),M=n("el-tag"),E=n("el-table"),U=n("el-card"),b=n("el-input"),_=n("el-form-item"),w=n("el-radio"),q=n("el-radio-group"),z=n("el-form"),I=n("el-dialog"),T=J("loading");return y(),F("div",Q,[t(U,{shadow:"never"},{header:l(()=>[V("div",W,[e[6]||(e[6]=V("span",null,"公告管理",-1)),t(r,{type:"primary",onClick:x},{default:l(()=>[...e[5]||(e[5]=[i("发布公告",-1)])]),_:1})])]),default:l(()=>[K((y(),P(E,{data:g.value,style:{width:"100%"}},{default:l(()=>[t(u,{prop:"id",label:"ID",width:"80"}),t(u,{prop:"title",label:"公告标题","min-width":"200","show-overflow-tooltip":""}),t(u,{label:"状态",width:"100"},{default:l(o=>[t(M,{type:o.row.status===1?"success":"info"},{default:l(()=>[i(Z(o.row.status===1?"显示":"隐藏"),1)]),_:2},1032,["type"])]),_:1}),t(u,{prop:"createTime",label:"发布时间",width:"180"}),t(u,{label:"操作",width:"150"},{default:l(o=>[t(r,{size:"small",link:"",onClick:$=>C(o.row)},{default:l(()=>[...e[7]||(e[7]=[i("编辑",-1)])]),_:1},8,["onClick"]),t(r,{size:"small",type:"danger",link:"",onClick:$=>B(o.row)},{default:l(()=>[...e[8]||(e[8]=[i("删除",-1)])]),_:1},8,["onClick"])]),_:1})]),_:1},8,["data"])),[[T,p.value]])]),_:1}),t(I,{modelValue:d.value,"onUpdate:modelValue":e[4]||(e[4]=o=>d.value=o),title:c.value,width:"600px"},{footer:l(()=>[t(r,{onClick:e[3]||(e[3]=o=>d.value=!1)},{default:l(()=>[...e[11]||(e[11]=[i("取消",-1)])]),_:1}),t(r,{type:"primary",onClick:D},{default:l(()=>[...e[12]||(e[12]=[i("确定",-1)])]),_:1})]),default:l(()=>[t(z,{model:a,rules:N,ref_key:"formRef",ref:v,"label-width":"80px"},{default:l(()=>[t(_,{label:"标题",prop:"title"},{default:l(()=>[t(b,{modelValue:a.title,"onUpdate:modelValue":e[0]||(e[0]=o=>a.title=o),placeholder:"请输入公告标题"},null,8,["modelValue"])]),_:1}),t(_,{label:"内容",prop:"content"},{default:l(()=>[t(b,{type:"textarea",modelValue:a.content,"onUpdate:modelValue":e[1]||(e[1]=o=>a.content=o),rows:"10",placeholder:"请输入公告内容"},null,8,["modelValue"])]),_:1}),t(_,{label:"状态"},{default:l(()=>[t(q,{modelValue:a.status,"onUpdate:modelValue":e[2]||(e[2]=o=>a.status=o)},{default:l(()=>[t(w,{label:1},{default:l(()=>[...e[9]||(e[9]=[i("显示",-1)])]),_:1}),t(w,{label:0},{default:l(()=>[...e[10]||(e[10]=[i("隐藏",-1)])]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue","title"])])}}},oe=S(X,[["__scopeId","data-v-69c83fff"]]);export{oe as default};
