import{_ as M,o as N,b as l,c as _,e as n,w as a,r,i as f,J as b,I as V,f as u,F as D,B as E,d as t,u as z,$ as I,t as p,g,l as y,Z as S,P as J}from"./index-Bc-dwE5O.js";import{g as L,r as P}from"./favorite-NgHMPl8T.js";import"./request-bgZeUyhp.js";import"./auth-BBsyecEI.js";const R={class:"container my-favorites-page"},T=["onClick"],Z={class:"image-error"},j={key:0,class:"status-mask"},q={class:"book-info"},A=["onClick"],G={class:"book-price"},H={class:"price"},K={class:"card-actions"},O={__name:"MyFavorites",setup(Q){const c=f(!1),i=f([]),h=async()=>{c.value=!0;try{const s=await L({pageNum:1,pageSize:100});i.value=s.data.records}catch{}finally{c.value=!1}},k=s=>{S.confirm("确定要取消收藏该教材吗？","提示").then(async()=>{await P(s),i.value=i.value.filter(o=>o.id!==s),J.success("已取消收藏")})};return N(h),(s,o)=>{const C=r("el-icon"),$=r("el-image"),v=r("el-button"),m=r("el-card"),w=r("el-col"),x=r("el-row"),F=r("el-empty"),B=b("loading");return l(),_("div",R,[n(m,null,{header:a(()=>[...o[0]||(o[0]=[t("div",{class:"card-header"},[t("span",{class:"title"},"我的收藏")],-1)])]),default:a(()=>[V((l(),u(x,{gutter:20},{default:a(()=>[(l(!0),_(D,null,E(i.value,e=>(l(),u(w,{span:6,key:e.id},{default:a(()=>[n(m,{"body-style":{padding:"0px"},class:"book-card"},{default:a(()=>[t("div",{class:"card-image-wrapper",onClick:d=>s.$router.push(`/textbook/${e.id}`)},[n($,{src:e.cover,class:"book-cover",fit:"cover"},{error:a(()=>[t("div",Z,[n(C,null,{default:a(()=>[n(z(I))]),_:1})])]),_:1},8,["src"]),e.status!==1?(l(),_("div",j,[t("span",null,p(e.status===2?"已售出":"已下架"),1)])):g("",!0)],8,T),t("div",q,[t("div",{class:"book-title",onClick:d=>s.$router.push(`/textbook/${e.id}`)},p(e.title),9,A),t("div",G,[t("span",H,"¥"+p(e.price),1)]),t("div",K,[n(v,{link:"",onClick:d=>k(e.id)},{default:a(()=>[...o[1]||(o[1]=[y("取消收藏",-1)])]),_:1},8,["onClick"]),n(v,{type:"primary",size:"small",disabled:e.status!==1,onClick:d=>s.$router.push(`/textbook/${e.id}`)},{default:a(()=>[...o[2]||(o[2]=[y(" 立即购买 ",-1)])]),_:1},8,["disabled","onClick"])])])]),_:2},1024)]),_:2},1024))),128))]),_:1})),[[B,c.value]]),i.value.length===0&&!c.value?(l(),u(F,{key:0,description:"暂无收藏的教材"})):g("",!0)]),_:1})])}}},ee=M(O,[["__scopeId","data-v-64ea6e53"]]);export{ee as default};
