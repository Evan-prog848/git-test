import{_ as N,o as E,a as I,b as p,c as w,d as e,e as t,w as s,n as v,u as n,f as y,g as K,h as T,s as U,F as C,r,i as $,j as q,k as h,l,m as D,t as F,p as M,q as R,v as Y,x as A,y as G,T as H,z as J}from"./index-Bc-dwE5O.js";import{u as O}from"./user-BS79HK15.js";import"./auth-BBsyecEI.js";const P={class:"layout"},Q={class:"container header-content"},W={class:"logo-icon"},X={class:"nav"},Z={class:"search-bar"},oo={class:"user-info"},to={class:"avatar-dropdown"},eo={class:"nickname"},so={class:"main"},no={class:"footer"},lo={class:"container footer-inner"},ao={class:"footer-grid"},ro={class:"footer-brand"},io={class:"footer-logo"},uo={class:"footer-links"},fo={__name:"Layout",setup(po){const c=q(),f=O(),_=$(""),k=$(!1),g=()=>{k.value=window.scrollY>10};E(()=>{window.addEventListener("scroll",g,{passive:!0})}),I(()=>{window.removeEventListener("scroll",g)});const x=()=>{_.value.trim()&&c.push({path:"/textbooks",query:{keyword:_.value.trim()}})},V=a=>{a==="logout"?(f.logout(),c.push("/login")):c.push(`/${a}`)};return(a,o)=>{const d=r("el-icon"),i=r("router-link"),L=r("el-input"),S=r("el-avatar"),m=r("el-dropdown-item"),j=r("el-dropdown-menu"),z=r("el-dropdown"),b=r("el-button"),B=r("router-view");return p(),w("div",P,[e("header",{class:v(["header",{"header--scrolled":k.value}])},[e("div",Q,[e("div",{class:"logo",onClick:o[0]||(o[0]=u=>a.$router.push("/"))},[e("div",W,[t(d,null,{default:s(()=>[t(n(h))]),_:1})]),o[4]||(o[4]=e("span",{class:"logo-text"},"书循",-1))]),e("nav",X,[t(i,{to:"/",class:v(["nav-link",{active:a.$route.path==="/"}])},{default:s(()=>[...o[5]||(o[5]=[l("首页",-1)])]),_:1},8,["class"]),t(i,{to:"/textbooks",class:v(["nav-link",{active:a.$route.path==="/textbooks"}])},{default:s(()=>[...o[6]||(o[6]=[l("所有教材",-1)])]),_:1},8,["class"]),n(f).isLogin?(p(),y(i,{key:0,to:"/publish",class:v(["nav-link",{active:a.$route.path==="/publish"}])},{default:s(()=>[...o[7]||(o[7]=[l("发布教材",-1)])]),_:1},8,["class"])):K("",!0)]),e("div",Z,[t(L,{modelValue:_.value,"onUpdate:modelValue":o[1]||(o[1]=u=>_.value=u),placeholder:"搜索书名、作者、课程...","prefix-icon":n(U),onKeyup:T(x,["enter"]),clearable:""},null,8,["modelValue","prefix-icon"])]),e("div",oo,[n(f).isLogin?(p(),w(C,{key:0},[t(i,{to:"/messages",class:"icon-btn",title:"消息"},{default:s(()=>[t(d,{size:20},{default:s(()=>[t(n(D))]),_:1})]),_:1}),t(z,{onCommand:V,trigger:"click"},{dropdown:s(()=>[t(j,null,{default:s(()=>[t(m,{command:"profile"},{default:s(()=>[t(d,null,{default:s(()=>[t(n(R))]),_:1}),o[8]||(o[8]=l(" 个人中心 ",-1))]),_:1}),t(m,{command:"orders"},{default:s(()=>[t(d,null,{default:s(()=>[t(n(Y))]),_:1}),o[9]||(o[9]=l(" 我的订单 ",-1))]),_:1}),t(m,{command:"favorites"},{default:s(()=>[t(d,null,{default:s(()=>[t(n(A))]),_:1}),o[10]||(o[10]=l(" 我的收藏 ",-1))]),_:1}),t(m,{divided:"",command:"logout"},{default:s(()=>[t(d,null,{default:s(()=>[t(n(G))]),_:1}),o[11]||(o[11]=l(" 退出登录 ",-1))]),_:1})]),_:1})]),default:s(()=>[e("span",to,[t(S,{size:34,src:n(f).userInfo.avatar||"https://cube.elemecdn.com/3/7c/3ea6beec64369c2642b92c6726f1epng.png"},null,8,["src"]),e("span",eo,F(n(f).userInfo.nickname),1),t(d,{class:"arrow"},{default:s(()=>[t(n(M))]),_:1})])]),_:1})],64)):(p(),w(C,{key:1},[t(b,{onClick:o[2]||(o[2]=u=>a.$router.push("/login")),round:""},{default:s(()=>[...o[12]||(o[12]=[l("登录",-1)])]),_:1}),t(b,{type:"primary",onClick:o[3]||(o[3]=u=>a.$router.push("/register")),round:""},{default:s(()=>[...o[13]||(o[13]=[l("注册",-1)])]),_:1})],64))])])],2),e("main",so,[t(B,null,{default:s(({Component:u})=>[t(H,{name:"fade-slide",mode:"out-in"},{default:s(()=>[(p(),y(J(u)))]),_:2},1024)]),_:1})]),e("footer",no,[e("div",lo,[e("div",ao,[e("div",ro,[e("div",io,[t(d,null,{default:s(()=>[t(n(h))]),_:1}),o[14]||(o[14]=e("span",null,"书循",-1))]),o[15]||(o[15]=e("p",{class:"footer-desc"},"让知识传递，让书籍循环。校园二手教材交易平台，助力绿色校园。",-1))]),e("div",uo,[o[19]||(o[19]=e("h4",null,"快速导航",-1)),t(i,{to:"/textbooks"},{default:s(()=>[...o[16]||(o[16]=[l("浏览教材",-1)])]),_:1}),t(i,{to:"/wanted"},{default:s(()=>[...o[17]||(o[17]=[l("求购信息",-1)])]),_:1}),t(i,{to:"/publish"},{default:s(()=>[...o[18]||(o[18]=[l("发布教材",-1)])]),_:1})]),o[20]||(o[20]=e("div",{class:"footer-links"},[e("h4",null,"帮助支持"),e("a",{href:"javascript:;"},"使用指南"),e("a",{href:"javascript:;"},"常见问题"),e("a",{href:"javascript:;"},"联系我们")],-1))]),o[21]||(o[21]=e("div",{class:"footer-bottom"},[e("p",null,"© 2025 书循 - 校园二手教材交易系统")],-1))])])])}}},co=N(fo,[["__scopeId","data-v-c1cab07d"]]);export{co as default};
